<berg-layout
  *ngIf="rx.layout$ | async as layout"
  [topLeftPosition]="layout.topLeftPosition!"
  [topRightPosition]="layout.topRightPosition!"
  [bottomLeftPosition]="layout.bottomLeftPosition!"
  [bottomRightPosition]="layout.bottomRightPosition!"
  [resizeDisabled]="layout.resizeDisabled!"
  [resizeTwoDimensions]="layout.resizeTwoDimensions!"
  [resizePreviewDelay]="layout.resizePreviewDelay!"
  [topInset]="layout.topInset!"
  [rightInset]="layout.rightInset!"
  [bottomInset]="layout.bottomInset!"
  [leftInset]="layout.leftInset!"
>
  <berg-panel
    slot="top"
    *ngIf="!layout.top?.remove!"
    eventBindingMode="none"
    [size]="topSize"
    [minSize]="topSize"
    [absolute]="layout.top?.absolute!"
    [collapsed]="layout.top?.collapsed!"
    [resizeDisabled]="layout.top?.resizeDisabled!"
    (resized)="onResized('top', $event)"
    (backdropClicked)="onBackdropClicked('top')"
  >
    <berg-toolbar></berg-toolbar>
  </berg-panel>

  <berg-panel
    slot="right"
    *ngIf="!layout.right?.remove!"
    eventBindingMode="none"
    [absolute]="layout.right?.absolute!"
    [collapsed]="layout.right?.collapsed!"
    [resizeDisabled]="layout.right?.resizeDisabled!"
    (resized)="onResized('right', $event)"
    (backdropClicked)="onBackdropClicked('right')"
  >
  </berg-panel>

  <berg-panel
    slot="bottom"
    *ngIf="!layout.bottom?.remove!"
    eventBindingMode="none"
    [size]="bottomSize"
    [minSize]="bottomSize"
    [absolute]="layout.bottom?.absolute!"
    [collapsed]="layout.bottom?.collapsed!"
    [resizeDisabled]="layout.bottom?.resizeDisabled!"
    (resized)="onResized('bottom', $event)"
    (backdropClicked)="onBackdropClicked('bottom')"
  >
    <app-editor-icon-nav (viewChanged)="view = $event" [view]="view">
    </app-editor-icon-nav>
  </berg-panel>

  <berg-panel
    slot="left"
    *ngIf="!layout.left?.remove!"
    eventBindingMode="none"
    [size]="leftSize"
    [minSize]="leftSize"
    [maxSize]="leftSize"
    [absolute]="layout.left?.absolute!"
    [collapsed]="layout.left?.collapsed!"
    [resizeDisabled]="layout.left?.resizeDisabled!"
    (resized)="onResized('left', $event)"
    (backdropClicked)="onBackdropClicked('left')"
  >
    <app-editor-nav (viewChanged)="view = $event"></app-editor-nav>
  </berg-panel>

  <berg-panel slot="center">
    <app-editor
      [css]="rx.css$ | async"
      [html]="rx.angularHtml$ | async"
      [scss]="rx.scss$ | async"
      [view]="view"
    >
    </app-editor>
  </berg-panel>
</berg-layout>
