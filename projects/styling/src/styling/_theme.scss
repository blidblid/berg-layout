@use 'sass:map';

@mixin theme($colors) {
  @include panel-theme($colors);
  @include resizing-theme($colors);
}

@mixin panel-theme($colors) {
  $divider: map-get(
    $map: $colors,
    $key: 'divider',
  );

  $background: map-get(
    $map: $colors,
    $key: 'background',
  );

  $background-low-contrast: map-get(
    $map: $colors,
    $key: 'background-low-contrast',
  );

  $background-high-contrast: map-get(
    $map: $colors,
    $key: 'background-high-contrast',
  );

  $background-backdrop: map-get(
    $map: $colors,
    $key: 'background-backdrop',
  );

  .berg-panel-backdrop {
    background: $background-backdrop;
  }

  .berg-panel-top {
    background: $background-high-contrast;
  }

  .berg-panel-bottom {
    border-top: 1px solid $divider;
  }

  .berg-panel-left,
  .berg-panel-right {
    background: $background-low-contrast;
  }

  body,
  .berg-panel-center,
  .berg-panel-bottom {
    background: $background;
  }

  @at-root body#{&} {
    background: $background;
  }
}

@mixin resizing-theme($map) {
  $resizing-indicator-color: map-get($map, 'resizing-indicator-color');
  $previewing-indicator-color: map-get($map, 'previewing-indicator-color') or
    $resizing-indicator-color;

  .berg-layout-previewing-top .berg-panel-resize-toggle-top,
  .berg-layout-previewing-right .berg-panel-resize-toggle-right,
  .berg-layout-previewing-bottom .berg-panel-resize-toggle-bottom,
  .berg-layout-previewing-top::part(resize-toggle-top),
  .berg-layout-previewing-left::part(resize-toggle-left) {
    background: $previewing-indicator-color;
  }

  .berg-layout-resizing-top .berg-panel-resize-toggle-top,
  .berg-layout-resizing-right .berg-panel-resize-toggle-right,
  .berg-layout-resizing-bottom .berg-panel-resize-toggle-bottom,
  .berg-layout-resizing-top::part(resize-toggle-top),
  .berg-layout-resizing-left::part(resize-toggle-left) {
    background: $resizing-indicator-color;
  }
}
